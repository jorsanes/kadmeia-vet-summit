<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="robots" content="noindex,nofollow" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>KADMEIA · Admin</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif; margin: 0; }
      .msg { padding: 12px 16px; margin: 12px; border-radius: 8px; }
      .err { background:#fee; color:#900; border:1px solid #fbb; }
      .ok  { background:#eefaf1; color:#094; border:1px solid #bde5c8; }
      .muted { color:#666; font-size: 14px; }
    </style>
  </head>
  <body>
    <div id="status" class="msg ok muted">Cargando Decap CMS…</div>

    <script>
      (function () {
        // Pinea una versión estable (evita 3.3.3)
        const V = "3.3.1";
        const SOURCES = [
          `https://unpkg.com/decap-cms@${V}/dist/decap-cms.js`,
          `https://cdn.jsdelivr.net/npm/decap-cms@${V}/dist/decap-cms.js`,
        ];

        const $status = document.getElementById("status");

        function setMsg(html, cls) {
          $status.className = `msg ${cls}`;
          $status.innerHTML = html;
        }

        function loadFrom(i) {
          if (i >= SOURCES.length) {
            setMsg(
              'Error: No se pudo cargar Decap CMS desde los CDNs. ' +
              'Revisa tu conexión/CSP o prueba más tarde.',
              'err'
            );
            return;
          }
          const src = SOURCES[i];
          const s = document.createElement("script");
          s.src = src;
          s.onload = function () {
            setMsg(`Decap CMS cargado desde <code>${src}</code>`, "ok muted");
          };
          s.onerror = function () {
            setMsg(`Fallo cargando <code>${src}</code>. Probando alternativa…`, "err");
            // intenta el siguiente CDN
            loadFrom(i + 1);
          };
          document.body.appendChild(s);
        }

        loadFrom(0);
      })();
    </script>
    <noscript>
      <div class="msg err">Necesitas JavaScript habilitado para usar el CMS.</div>
    </noscript>
  </body>
</html>
